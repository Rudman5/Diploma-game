<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Babylon + Vite</title>
    <script type="module" src="/src/main.ts"></script>
  </head>
  <body>
    <canvas id="renderCanvas"></canvas>
    <div class="gui-btn" style="position: fixed; top: 10px; right: 10px">Game objective</div>
    <div id="game-details" class="hidden">
      <div id="game-objective" class="hidden">
        <div>Mission Briefing</div>
        <br />
        <div>
          Your primary objective is to successfully deploy the landing pad within Artemis' precisely
          designated landing area. To accomplish this critical mission, your astronaut team must
          navigate the challenges of the harsh lunar environment while managing essential survival
          resources. You'll need to carefully gather materials and supplies, then utilize the rover
          to transport both crew and equipment across the treacherous terrain to reach the target
          deployment zone. Every decision counts in ensuring both mission success and crew survival.
        </div>
        <br />
        <div class="gui-btn" id="close-objective">Close</div>
      </div>
      <div id="game-over" class="hidden">
        <div>Game Over</div>
        <div id="astronaut-name"></div>
        <br />
        <div class="gui-btn" id="start-new" style="width: auto; padding: 0px 20px; cursor: pointer">
          Start new game
        </div>
      </div>
      <div id="game-won" class="hidden">
        <div>Mission Accomplished!</div>
        <div>
          Against all odds, your crew has triumphed over the challenges of space exploration. The
          Artemis rocket is now en route to Earth, carrying your victorious astronauts and priceless
          scientific discoveries back to a hero's welcome.
        </div>
        <div
          class="gui-btn"
          id="start-new-won"
          style="width: auto; padding: 0px 20px; cursor: pointer"
        >
          Start new game
        </div>
      </div>
    </div>
    <div id="alert-container"></div>
    <div id="gui-container">
      <div class="top-container">
        <div id="resource-bar">
          <div style="width: 100%" id="entity-name"></div>
          <div class="resource" id="energy">
            <svg
              style="fill: rgb(255, 255, 0)"
              focusable="false"
              aria-hidden="true"
              viewBox="0 0 24 24"
            >
              <path
                d="M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66s.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"
              ></path>
            </svg>
            <span id="energy-count">0/0</span>
            <div>Energy</div>
          </div>
          <div class="resource" id="oxygen">
            <svg
              focusable="false"
              aria-hidden="true"
              viewBox="0 0 24 24"
              style="fill: rgb(39, 222, 72)"
            >
              <path
                d="M14.5 17c0 1.65-1.35 3-3 3s-3-1.35-3-3h2c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1H2v-2h9.5c1.65 0 3 1.35 3 3M19 6.5C19 4.57 17.43 3 15.5 3S12 4.57 12 6.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S16.33 8 15.5 8H2v2h13.5c1.93 0 3.5-1.57 3.5-3.5m-.5 4.5H2v2h16.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5v2c1.93 0 3.5-1.57 3.5-3.5S20.43 11 18.5 11"
              ></path>
            </svg>
            <span id="oxygen-count">100</span>
            <div>Oxygen</div>
          </div>
          <div class="resource" id="food">
            <svg
              focusable="false"
              aria-hidden="true"
              viewBox="0 0 24 24"
              style="fill: rgb(201, 17, 45)"
            >
              <path
                d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4"
              ></path>
            </svg>
            <span id="food-count">100</span>
            <div>Food</div>
          </div>
          <div class="resource" id="water">
            <svg
              focusable="false"
              aria-hidden="true"
              viewBox="0 0 24 24"
              style="fill: rgb(46, 144, 176)"
            >
              <path
                d="M17.66 8 12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8M6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14z"
              ></path>
            </svg>
            <span id="water-count">100</span>
            <div>Water</div>
          </div>
          <div id="rocks" class="resource">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              version="1.0"
              width="1114.000000pt"
              height="1280.000000pt"
              viewBox="0 0 1114.000000 1280.000000"
              preserveAspectRatio="xMidYMid meet"
            >
              <g
                transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)"
                style="fill: rgba(201, 106, 17, 0.982)"
              >
                <path
                  d="M5285 12789 c-88 -6 -153 -17 -225 -39 -20 -6 -147 -10 -305 -10 l-270 0 -67 -45 c-170 -114 -345 -338 -525 -670 -39 -71 -125 -222 -191 -334 -115 -195 -136 -222 -434 -585 -172 -209 -372 -444 -444 -521 -171 -182 -693 -698 -904 -893 -361 -335 -633 -674 -793 -992 -94 -187 -134 -317 -206 -675 -33 -164 -101 -535 -125 -685 -8 -52 -27 -166 -41 -252 -88 -548 -81 -515 -147 -693 -48 -129 -204 -482 -313 -710 -166 -345 -235 -561 -276 -865 -35 -253 -7 -670 77 -1135 14 -77 29 -162 34 -190 26 -144 89 -462 141 -713 59 -283 59 -284 57 -435 -3 -143 -1 -157 26 -242 34 -110 56 -153 112 -226 127 -165 259 -247 854 -526 126 -59 318 -195 482 -341 49 -44 63 -62 52 -66 -11 -4 30 -45 138 -138 84 -73 180 -159 214 -190 70 -64 116 -90 255 -141 208 -78 633 -164 944 -192 90 -8 100 -10 570 -81 770 -116 1341 -192 1500 -201 134 -7 387 10 555 38 312 51 635 163 871 301 52 31 120 68 153 83 64 30 165 97 236 156 25 20 263 182 529 359 642 427 643 427 1061 454 630 41 681 47 1010 112 564 112 815 249 1005 548 109 172 187 424 226 736 21 161 18 651 -4 815 -27 204 -71 403 -112 501 -52 126 -160 314 -227 393 -98 118 -166 226 -189 302 -20 66 -21 78 -10 177 20 175 57 374 142 757 81 362 155 794 198 1150 6 50 16 133 22 185 18 141 15 408 -5 508 -45 231 -113 352 -306 542 -171 168 -271 238 -506 354 -506 250 -907 489 -1154 687 -320 257 -989 1043 -1485 1744 -549 777 -1034 1288 -1607 1696 -219 156 -368 203 -593 188z"
                />
              </g>
            </svg>
            <span id="rocks-count">10</span>
            <div>Rocks</div>
          </div>
          <div class="resource" style="padding-left: 15px; border-left: 2px solid white">
            <div>Target Zone</div>
            <span id="landing-distance">-</span>
          </div>
        </div>
        <div class="astronauts-thumbs">
          <div class="astronaut-thumb" id="neil-armstrong">
            <div class="menu-btn">
              <div class="tooltip">Neil Armstrong</div>
              <img src="./assets/astronautThumb.png" />
              <img style="display: none" src="./assets/artemisRoverThumb.png" />
            </div>
          </div>
          <div class="astronaut-thumb" id="buzz-aldrin">
            <div class="menu-btn">
              <div class="tooltip">Buzz Aldrin</div>
              <img src="./assets/astronautThumb.png" />
              <img style="display: none" src="./assets/artemisRoverThumb.png" />
            </div>
          </div>
          <div class="astronaut-thumb" id="michael-collins">
            <div class="menu-btn">
              <div class="tooltip">Michael Collins</div>
              <img src="./assets/astronautThumb.png" />
              <img style="display: none" src="./assets/artemisRoverThumb.png" />
            </div>
          </div>
        </div>
      </div>
      <div class="menu-container">
        <div id="sub-menu" class="gui-menu">
          <!-- <div id="back-btn" class="back-btn">
            <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
              <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"></path>
            </svg>
            <div class="tooltip">Back</div>
          </div> -->
          <div id="model-buttons" class="scrollable-buttons"></div>
        </div>
        <div class="buttons">
          <div id="leave-rover-btn" class="gui-btn">Leave Rover</div>
          <div id="destroy-building-btn" class="gui-btn">Destroy building</div>
          <div id="refill-astronaut" class="gui-btn">Refill astronaut</div>
          <div id="refill-rover" class="gui-btn">Refill rover</div>
        </div>
      </div>
    </div>
  </body>
  <style>
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Inter, system-ui, 'Segoe UI', Roboto, Arial, sans-serif;
    }

    #renderCanvas {
      width: 100%;
      height: calc(100%);
      touch-action: none;
      display: block;
    }
    .top-container {
      border-bottom: 1px solid black;
      max-width: 1200px;
      margin: auto;
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      padding-bottom: 15px;
    }
    #entity-name {
      font-size: 24px;
      color: white;
      font-style: italic;
      text-shadow: 2px 4px 3px rgba(0, 0, 0, 0.3);
      padding-bottom: 15px;
    }
    .astronauts-thumbs {
      display: flex;
      gap: 12px;
      margin-right: 0;
      margin-left: auto;
    }
    #resource-bar {
      max-width: 900px;
      height: 56px;
      display: flex;
      flex-wrap: wrap;
      align-items: space-between;
      z-index: 10000;
      color: #eee;
      box-sizing: border-box;
      padding: 6px 0px;
      pointer-events: none;
    }

    .resource:first-child {
      padding-left: 0px;
    }

    .resource {
      display: flex;
      align-items: center;
      gap: 8px;
      pointer-events: auto;
      padding-right: 20px;
      font-size: 14px;
    }

    .resource span {
      /* font-size: 18px; */
      font: bold;
    }

    .resource svg {
      fill: white;
      width: 24px;
      height: 24px;
      object-fit: contain;
    }

    #gui-container {
      position: fixed;
      bottom: 0;
      width: 100vw;
      box-sizing: border-box;
      padding: 15px 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 10000;
      pointer-events: auto;
      background: rgba(6, 6, 6, 0.35);
    }

    /* menus */
    .gui-menu,
    #main-menu,
    #sub-menu {
      display: flex;
      gap: 12px;
      width: 100%;
      max-width: 1200px;
      box-sizing: border-box;
      margin: 0 auto;
      pointer-events: auto;
    }

    .hidden {
      display: none !important;
    }

    .astronaut-thumb.active .menu-btn,
    .model-btn.active,
    .gui-btn:hover,
    .menu-btn:hover,
    .back-btn:hover,
    .model-btn:hover,
    .menu-btn.model-btn:hover {
      transform: translateY(-2px);
      border-color: #888 !important;
      background: #4b4b4b !important;
    }

    .gui-btn,
    .menu-btn,
    .model-btn,
    .menu-btn.model-btn {
      cursor: pointer;
      text-align: center;
      box-sizing: border-box;
      width: 80px;
      height: 80px;
      padding: 4px;
      border-radius: 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #232323;
      border: 2px solid #555;
      color: white;
      font-size: 16px;
    }

    .back-btn {
      width: 68px;
      height: 68px;
      padding: 4px;
      border-radius: 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #232323;
      border: 2px solid #555;
    }

    .back-btn svg {
      fill: white;
      width: 50px;
      display: block;
    }

    .astronaut-thumb img,
    .model-btn img,
    .menu-btn img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      pointer-events: none;
    }

    .scrollable-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      max-height: 100px;
      padding-right: 6px;
    }

    .back-btn .tooltip,
    .model-btn .tooltip,
    .menu-btn .tooltip {
      position: absolute;
      bottom: -20px;
      background: rgba(0, 0, 0, 0.9);
      color: #fff;
      padding: 6px 8px;
      border-radius: 6px;
      font-size: 14px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      margin-bottom: 8px;
    }
    .astronaut-thumb.active .menu-btn .tooltip,
    .back-btn:hover .tooltip,
    .model-btn:hover .tooltip,
    .menu-btn:hover .tooltip {
      opacity: 1;
    }

    .menu-container {
      display: flex;
      max-width: 1200px;
      margin: 0 auto;
      margin-top: 15px;
      justify-content: space-between;
      width: 100%;
    }

    .buttons {
      display: flex;
      gap: 12px;
    }

    #refill-astronaut,
    #refill-rover,
    #destroy-building-btn,
    #leave-rover-btn {
      display: none;
    }

    .menu-btn.model-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .menu-btn.model-btn.disabled:hover {
      transform: none;
      box-shadow: none;
    }

    #game-details {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10001;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(5px);
    }

    #game-objective,
    #game-over,
    #game-won {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border: 2px solid #00ffff;
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      color: white;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
      max-width: 500px;
      width: 90%;
      animation: fadeInScale 0.5s ease-out;
    }

    #game-over {
      border-color: #ff4444;
      box-shadow: 0 0 30px rgba(255, 68, 68, 0.3);
    }

    #game-won {
      border-color: #44ff44;
      box-shadow: 0 0 30px rgba(68, 255, 68, 0.3);
    }

    #game-objective {
      max-width: 1000px;
      border-color: #00ffff;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
    }

    #game-over > div:first-child,
    #game-won > div:first-child {
      font-size: 2.5em;
      font-weight: bold;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    #game-over > div:first-child {
      color: #ff4444;
      text-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
    }

    #game-won > div:first-child {
      color: #44ff44;
      text-shadow: 0 0 10px rgba(68, 255, 68, 0.5);
    }

    #astronaut-name {
      font-size: 1.8em;
      color: #fff;
      margin: 15px 0;
      text-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
      font-weight: bold;
    }

    #game-won > div:nth-child(2) {
      font-size: 1.2em;
      margin: 20px 0;
      line-height: 1.5;
      color: #cccccc;
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    #game-over::before,
    #game-won::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      border-radius: 22px;
      animation: shimmer 3s ease-in-out infinite;
      z-index: -1;
    }

    @keyframes shimmer {
      0%,
      100% {
        opacity: 0.3;
      }
      50% {
        opacity: 0.7;
      }
    }
  </style>

  <style>
    #alert-container {
      position: fixed;
      top: 0;
      left: 0;
    }

    .alert-msg {
      background: #ff4444;
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      animation: slideIn 0.3s ease-out;
      border-left: 4px solid #cc0000;
      margin-bottom: 8px;
      font-family: Arial, sans-serif;
      font-size: 14px;
      max-width: 300px;
    }

    .alert-msg.warning {
      background: #ff9800;
      border-left-color: #f57c00;
    }

    .alert-msg.info {
      background: #2196f3;
      border-left-color: #1976d2;
    }

    .alert-msg.success {
      background: #4caf50;
      border-left-color: #388e3c;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .alert-msg.fade-out {
      animation: slideOut 0.3s ease-in forwards;
    }

    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }
  </style>
</html>
